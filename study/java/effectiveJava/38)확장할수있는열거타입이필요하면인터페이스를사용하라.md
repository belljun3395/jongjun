## 확장할 수 있는 열거 타입이 필요하면 인터페이스를 사용하라



타입 안전 열거 패턴은 확장할 수 있으나 열거 타입은 그럴 수 없다.

달리 말하면, 타입 안전 열거 패턴은 열거한 값들을 그대로 가져온 다음 값을 더 추가하여 다른 목적으로 쓸 수 있지만, 열거 타입은 그렇게 할 수 없다는 뜻이다.

사실 대부분 상황에서 열거 타입을 확장하는 건 좋지 않은 생각이다.

확장한 타입의 원소는 기반 타입의 원소로 취급하지만, 그 반대는 성립하지 않는다면 뭔가 이상하다.



그런데 확장할 수 있는 열거 타입이 어울리는 쓰임이 최소한 하나는 있다.

바로 연산 코드다.

연산 코드의 각 원소는 특정 기계가 수행하는 연산을 뜻한다.

**이따금 API가 제공하는 기본 연산 외에 사용자가 확장 연산을 추가할 수 있도록 열어줘야 할 때가 있다.**

다행히 **열거 타입이 임의의 인터페이스를 구현할 수 있다.**

**열거 타입은 확장할 수 없지만 인터페이스는 확장할 수 있다.**



하지만 인터페이스를 이용해 확장 가능한 열거 타입을 흉내 내는 방식에도 한 가지 사소한 문제가 있다.

바로 열거 타입끼리 구현을 상속할 수 없다는 점이다.

아무 상태에도 의존하지 않는 경우에는 디폴트 구현을 이용해 인터페이스에 추가하는 방법이 있다.

